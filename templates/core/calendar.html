{% extends 'base.html' %}

{% block title %}ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ Ð½Ð° Ð½ÐµÐ´ÐµÐ»ÑŽ{% endblock %}

{% block content %}
<h2 class="mb-4 text-center">ðŸ“… ÐŸÐ»Ð°Ð½Ñ‹ Ð½Ð° Ð½ÐµÐ´ÐµÐ»ÑŽ</h2>

<div class="table-responsive">
    <table class="table table-bordered" style="table-layout: fixed;">
        <!-- Ð¨ÐÐŸÐšÐ Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð« (Ð”ÐÐ¢Ð«) -->
        <thead class="table-dark text-center">
            <tr>
                {% for day in week_days %}
                    <th class="{% if day.is_today %}bg-primary{% endif %}">
                        <!-- date:"D" Ð²Ñ‹Ð²ÐµÐ´ÐµÑ‚ ÐŸÐ½, Ð’Ñ‚ (ÐµÑÐ»Ð¸ ÑÐ·Ñ‹Ðº Ñ€ÑƒÑÑÐºÐ¸Ð¹) Ð¸Ð»Ð¸ Mon, Tue -->
                        <!-- date:"d.m" Ð²Ñ‹Ð²ÐµÐ´ÐµÑ‚ 16.12 -->
                        <div style="font-size: 1.2rem;">{{ day.date|date:"d.m" }}</div>
                        <small class="text-white-50">{{ day.date|date:"l" }}</small>
                    </th>
                {% endfor %}
            </tr>
        </thead>
        
        <!-- Ð¢Ð•Ð›Ðž Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð« (Ð—ÐÐ”ÐÐ§Ð˜) -->
        <tbody>
            <tr>
                {% for day in week_days %}
                    <!-- Ð¯Ñ‡ÐµÐ¹ÐºÐ° Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð´Ð½Ñ -->
                    <td class="p-1 align-top {% if day.is_today %}bg-light{% endif %}" style="height: 300px;">
                        
                        <!-- ÐŸÐµÑ€ÐµÐ±Ð¸Ñ€Ð°ÐµÐ¼ Ð·Ð°Ð´Ð°Ñ‡Ð¸ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð´Ð½Ñ -->
                        {% for task in day.tasks %}
                            <div class="card mb-2 shadow-sm border-0">
                                <div class="card-body p-2">
                                    
                                    <!-- Ð¡Ñ‚Ð°Ñ‚ÑƒÑ (Ð³Ð°Ð»Ð¾Ñ‡ÐºÐ°) -->
                                    <div class="d-flex justify-content-between">
                                        {% if task.is_completed %}
                                            <span class="text-success">âœ…</span>
                                        {% else %}
                                            <span class="text-danger">ðŸ”¥</span>
                                        {% endif %}
                                        
                                        <!-- ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ ÐºÑ€ÑƒÐ¶Ð¾Ñ‡ÐºÐ¾Ð¼ -->
                                        <span class="badge rounded-circle p-1 
                                            {% if task.priority == 'H' %}bg-danger
                                            {% elif task.priority == 'M' %}bg-warning
                                            {% else %}bg-success{% endif %}" 
                                            style="width: 10px; height: 10px;"> 
                                        </span>
                                    </div>
                                    
                                    <!-- ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ (ÑÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð·Ð°Ð´Ð°Ñ‡Ñƒ, ÐµÑÐ»Ð¸ Ð·Ð°Ñ…Ð¾Ñ‡ÐµÑˆÑŒ) -->
                                    <p class="card-text mt-1 small fw-bold mb-0">
                                        {{ task.title }}
                                    </p>
                                    
                                    {% if task.category %}
                                        <small class="text-muted" style="font-size: 0.7rem;">
                                            {{ task.category.name }}
                                        </small>
                                    {% endif %}
                                </div>
                            </div>
                        {% empty %}
                            <!-- Ð•ÑÐ»Ð¸ Ð·Ð°Ð´Ð°Ñ‡ Ð½ÐµÑ‚, ÑÑ‡ÐµÐ¹ÐºÐ° Ð¿ÑƒÑÑ‚Ð°Ñ -->
                        {% endfor %}
                        
                    </td>
                {% endfor %}
            </tr>
        </tbody>
    </table>
</div>

<div class="text-center mt-3">
    <a href="{% url 'add_task' %}" class="btn btn-outline-primary">Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ð½Ð° Ð´Ð°Ñ‚Ñƒ</a>
</div>
{% endblock %}